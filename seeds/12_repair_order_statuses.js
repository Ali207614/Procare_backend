exports.seed = async function (knex) {
  await knex('repair_order_statuses').del();

  // Get all branches first
  const branches = await knex('branches').select('id').where('status', 'Open');

  const statusTemplates = [
    {
      id_suffix: '001',
      name_uz: 'Yangi buyurtma',
      name_ru: 'Новый заказ',
      name_en: 'New Order',
      bg_color: '#E3F2FD',
      color: '#1976D2',
      sort: 1,
      can_user_view: true,
      type: null,
      is_protected: true,
      can_add_payment: false,
    },
    {
      id_suffix: '002',
      name_uz: 'Diagnostika',
      name_ru: 'Диагностика',
      name_en: 'Diagnosis',
      bg_color: '#FFF3E0',
      color: '#F57C00',
      sort: 2,
      can_user_view: true,
      type: null,
      is_protected: false,
      can_add_payment: false,
    },
    {
      id_suffix: '003',
      name_uz: 'Tasdiqlanganiga kutmoqda',
      name_ru: 'Ждет подтверждения',
      name_en: 'Waiting for Approval',
      bg_color: '#FFFDE7',
      color: '#FBC02D',
      sort: 3,
      can_user_view: true,
      type: null,
      is_protected: false,
      can_add_payment: false,
    },
    {
      id_suffix: '004',
      name_uz: 'Tamirlash jarayoni',
      name_ru: 'В процессе ремонта',
      name_en: 'In Repair',
      bg_color: '#F3E5F5',
      color: '#7B1FA2',
      sort: 4,
      can_user_view: true,
      type: null,
      is_protected: false,
      can_add_payment: false,
    },
    {
      id_suffix: '005',
      name_uz: 'Qismlarni kutmoqda',
      name_ru: 'Ожидание запчастей',
      name_en: 'Waiting for Parts',
      bg_color: '#FCE4EC',
      color: '#C2185B',
      sort: 5,
      can_user_view: true,
      type: null,
      is_protected: false,
      can_add_payment: false,
    },
    {
      id_suffix: '006',
      name_uz: 'Sinov',
      name_ru: 'Тестирование',
      name_en: 'Testing',
      bg_color: '#E0F2F1',
      color: '#00796B',
      sort: 6,
      can_user_view: true,
      type: null,
      is_protected: false,
      can_add_payment: false,
    },
    {
      id_suffix: '007',
      name_uz: 'Tayyor',
      name_ru: 'Готов',
      name_en: 'Ready',
      bg_color: '#E8F5E8',
      color: '#388E3C',
      sort: 7,
      can_user_view: true,
      type: null,
      is_protected: false,
      can_add_payment: true,
    },
    {
      id_suffix: '008',
      name_uz: 'Yetkazilmoqda',
      name_ru: 'Доставляется',
      name_en: 'Out for Delivery',
      bg_color: '#EDE7F6',
      color: '#5E35B1',
      sort: 8,
      can_user_view: true,
      type: null,
      is_protected: false,
      can_add_payment: false,
    },
    {
      id_suffix: '009',
      name_uz: 'Yakunlangan',
      name_ru: 'Завершен',
      name_en: 'Completed',
      bg_color: '#E8F5E8',
      color: '#2E7D32',
      sort: 9,
      can_user_view: true,
      type: 'Completed',
      is_protected: true,
      can_add_payment: false,
    },
    {
      id_suffix: '010',
      name_uz: 'Bekor qilingan',
      name_ru: 'Отменен',
      name_en: 'Cancelled',
      bg_color: '#FFEBEE',
      color: '#D32F2F',
      sort: 10,
      can_user_view: true,
      type: 'Cancelled',
      is_protected: false,
      can_add_payment: false,
    },
    {
      id_suffix: '011',
      name_uz: 'Mijoz javob bermayapti',
      name_ru: 'Клиент не отвечает',
      name_en: 'Customer Not Responding',
      bg_color: '#FFF8E1',
      color: '#F9A825',
      sort: 11,
      can_user_view: true,
      type: null,
      is_protected: false,
      can_add_payment: false,
    },
    {
      id_suffix: '012',
      name_uz: 'Tamirlash mumkin emas',
      name_ru: 'Не подлежит ремонту',
      name_en: 'Cannot be Repaired',
      bg_color: '#EFEBE9',
      color: '#5D4037',
      sort: 12,
      can_user_view: true,
      type: 'Cancelled',
      is_protected: false,
      can_add_payment: false,
    },
  ];

  for (let branchIndex = 0; branchIndex < branches.length; branchIndex++) {
    const branch = branches[branchIndex];

    for (const template of statusTemplates) {
      await knex('repair_order_statuses').insert({
        id: `50000000-0000-0000-${String(branchIndex + 1).padStart(4, '0')}-${template.id_suffix}000000000`,
        name_uz: template.name_uz,
        name_ru: template.name_ru,
        name_en: template.name_en,
        bg_color: template.bg_color,
        color: template.color,
        sort: template.sort,
        can_user_view: template.can_user_view,
        is_active: true,
        type: template.type,
        is_protected: template.is_protected,
        can_add_payment: template.can_add_payment,
        status: 'Open',
        branch_id: branch.id,
        created_by: '00000000-0000-0000-0000-000000000000', // Super admin
        created_at: knex.fn.now(),
        updated_at: knex.fn.now(),
      });
    }
  }
};